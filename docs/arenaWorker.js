(()=>{"use strict";var t={443(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))(function(r,o){function n(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(n,a)}h((i=i.apply(t,e||[])).next())})},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(s(4174)),n=r(s(9606));let a=0;const h={};onmessage=({data:t})=>{if(void 0!==t.issuedId)return h[t.issuedId](),void delete h[t.issuedId];const e=t,s=e.isDemo,r=e.sources,d=[],u={waitNextTick:()=>i(void 0,void 0,void 0,function*(){return new Promise(t=>{const e=a++;h[e]=t,postMessage({issuedId:e,command:"Next"})})}),onPreThink:t=>{postMessage({command:"PreThink",id:t})},onPostThink:t=>{postMessage({command:"PostThink",id:t,loadedFrame:d.length})},onFrame:t=>{d.push(t)},onFinished:t=>{postMessage({result:t,command:"Finished"})},onEndOfGame:()=>{postMessage({frames:d,command:"EndOfGame"})},onError:t=>{postMessage({error:t,command:"Error"})}},l=new o.default(n.default,s);r.forEach(t=>{l.registerSourcer(t.source,t.name,t.name,t.color)}),postMessage({command:"Players",players:l.players()}),setTimeout(()=>i(void 0,void 0,void 0,function*(){yield l.compile(u);for(let t=0;t<1e4&&!l.isFinished;t++)yield l.tick(u)}),0)}},5731(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(8208)),o=i(s(8509));e.default=class{constructor(t,e,s){this.field=t,this.id=-1,this.direction=0,this.size=o.default.COLLISION_SIZE,this.wait=0,this.wait=0,this.position=new r.default(e,s),this.speed=new r.default(0,0)}think(){this.wait<=0?(this.wait=0,this.onThink()):this.wait=this.wait-1}onThink(){}action(){}move(){this.position=this.position.add(this.speed)}onHit(t){}dump(){throw new Error("not implimentation")}}},3819(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.isAccepted=!1}validate(){if(!this.isAccepted)throw new Error("Invalid command.")}accept(){this.isAccepted=!0}unaccept(){this.isAccepted=!1}}},8509(t,e){Object.defineProperty(e,"__esModule",{value:!0});class s{}s.INITIAL_SHIELD=100,s.INITIAL_FUEL=100,s.INITIAL_MISSILE_AMMO=20,s.LASER_ATTENUATION=1,s.LASER_MOMENTUM=128,s.FUEL_COST=.24,s.COLLISION_SIZE=4,s.SCAN_WAIT=.35,s.SPEED_RESISTANCE=.96,s.GRAVITY=.1,s.TOP_INVISIBLE_HAND=480,s.DISTANCE_BORDAR=400,s.DISTANCE_INVISIBLE_HAND=.008,s.OVERHEAT_BORDER=100,s.OVERHEAT_DAMAGE_LINEAR_WEIGHT=.05,s.OVERHEAT_DAMAGE_POWER_WEIGHT=.012,s.GROUND_DAMAGE_SCALE=1,s.COOL_DOWN=.5,s.ON_HIT_SPEED_GIVEN_RATE=.4,e.default=s},2956(t,e){Object.defineProperty(e,"__esModule",{value:!0});class s{}s.DIRECTION_RIGHT=1,s.DIRECTION_LEFT=-1,s.VERTICAL_UP="vertial_up",s.VERTICAL_DOWN="vertial_down",e.default=s},1336(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.framesOfLife=0,this.preThink=()=>{this.framesOfLife++},this.frame=()=>this.framesOfLife,this.altitude=()=>t.position.y,this.wait=e=>{0<e&&(t.wait+=e)}}}},9606(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.console={log:(...t)=>{}};const t={Object,String,Number,Boolean,Array,Date,Math,RegExp,JSON,NaN:NaN,Infinity:1/0,undefined:void 0,parseInt,parseFloat,isNaN,isFinite,console:this.console};this.argNames=Object.keys(t),this.argValues=this.argNames.map(e=>t[e])}isDebuggable(){return!0}getExposedConsole(){return this.console}load(t){let e=[];return e=e.concat(this.argNames),e.push('"use strict";\n'+t),function(t,e){function s(){return t.apply(this,e)}return s.prototype=t.prototype,new s}(Function,e).apply(void 0,this.argValues)}}},4174(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))(function(r,o){function n(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(n,a)}h((i=i.apply(t,e||[])).next())})},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(s(8208)),n=r(s(1335)),a=r(s(6951));e.default=class{constructor(t,e=!1){this.scriptLoaderConstructor=t,this.isDemo=e,this.currentId=0,this.center=0,this.isFinished=!1,this.dummyEnemy=new o.default(0,150),this.frame=0,this.sourcers=[],this.shots=[],this.fxs=[]}registerSourcer(t,e,s,i){const r=this.sourcers.length%2==0?-1:1,o=a.default.rand(80)+160*r,h=a.default.rand(160)+80;this.addSourcer(new n.default(this,o,h,t,e,s,i))}process(t,e){return i(this,void 0,void 0,function*(){for(const s of this.sourcers)t.onPreThink(s.id),yield t.waitNextTick(),e(s),t.onPostThink(s.id),yield t.waitNextTick()})}compile(t){return i(this,void 0,void 0,function*(){return this.process(t,e=>{try{e.compile(new this.scriptLoaderConstructor)}catch(e){const s=e instanceof Error?e.message:String(e);t.onError(`There is an error in your code: ${s}`)}})})}addSourcer(t){t.id=this.currentId++,this.sourcers.push(t)}addShot(t){t.id=this.currentId++,this.shots.push(t)}removeShot(t){const e=this.shots.indexOf(t);0<=e&&this.shots.splice(e,1)}addFx(t){t.id=this.currentId++,this.fxs.push(t)}removeFx(t){const e=this.fxs.indexOf(t);0<=e&&this.fxs.splice(e,1)}tick(t){return i(this,void 0,void 0,function*(){0===this.frame&&t.onFrame(this.dump()),this.center=this.computeCenter(),yield this.process(t,t=>{t.think(),this.shots.filter(e=>e.owner.id===t.id).forEach(t=>t.think())}),this.sourcers.forEach(t=>t.action()),this.shots.forEach(t=>t.action()),this.fxs.forEach(t=>t.action()),this.sourcers.forEach(t=>t.move()),this.shots.forEach(t=>t.move()),this.fxs.forEach(t=>t.move()),this.checkFinish(t),this.checkEndOfGame(t),this.frame++,t.onFrame(this.dump())})}checkFinish(t){if(this.isDemo)return void(128<this.frame&&(this.result={frame:this.frame,timeout:null,isDraw:null,winnerId:null},t.onFinished(this.result)));if(this.result)return;this.sourcers.forEach(t=>{t.alive=0<t.shield});const e=this.sourcers.filter(t=>t.alive);if(!(1<e.length)){if(1===e.length){const s=e[0];return this.result={winnerId:s.id,frame:this.frame,timeout:null,isDraw:!1},void t.onFinished(this.result)}this.result={winnerId:null,timeout:null,frame:this.frame,isDraw:!0},t.onFinished(this.result)}}checkEndOfGame(t){if(!this.isFinished&&this.result)return this.isDemo?(this.isFinished=!0,void t.onEndOfGame()):void(this.result.frame<this.frame-90&&(this.isFinished=!0,t.onEndOfGame()))}scanEnemy(t,e){return this.isDemo&&1===this.sourcers.length?e(this.dummyEnemy):this.sourcers.some(s=>s.alive&&s!==t&&e(s.position))}scanAttack(t,e){return this.shots.some(s=>s.owner!==t&&e(s.position)&&this.isIncoming(t,s))}isIncoming(t,e){const s=t.position,i=e.position,r=s.distance(i);return s.distance(i.add(e.speed))<r}checkCollision(t){const e=t.position,s=t.position.add(t.speed),i=this.shots.find(i=>i.breakable&&i.owner!==t.owner&&a.default.calcDistance(e,s,i.position)<t.size+i.size);if(i)return i;return this.sourcers.find(i=>i.alive&&i!==t.owner&&a.default.calcDistance(e,s,i.position)<t.size+i.size)||null}checkCollisionEnviroment(t){return t.position.y<0}computeCenter(){let t=0,e=0;return this.sourcers.forEach(s=>{s.alive&&(e+=s.position.x,t++)}),e/t}players(){const t={};return this.sourcers.forEach(e=>{t[e.id]={name:e.name||e.account,account:e.account,color:e.color}}),t}dump(){const t=[],e=[],s=[];return this.sourcers.forEach(e=>{t.push(e.dump())}),this.shots.forEach(t=>{e.push(t.dump())}),this.fxs.forEach(t=>{s.push(t.dump())}),{f:this.frame,s:t,b:e,x:s}}}},7295(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.LaserParam=e.MissileParam=void 0;class s{constructor(t){this.shotType=t}isLaser(){return"Laser"===this.shotType}isMissile(){return"Missile"===this.shotType}}e.default=s,e.MissileParam=class extends s{constructor(t){super("Missile"),this.bot=t}},e.LaserParam=class extends s{constructor(t,e){super("Laser"),this.direction=e,this.power=0,this.power=Math.min(Math.max(t||8,3),8)}}},2170(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s,i){this.field=t,this.position=e,this.speed=s,this.length=i,this.id=-1,this.frame=0}action(){this.frame++,this.length<=this.frame&&this.field.removeFx(this)}move(){this.position=this.position.add(this.speed)}dump(){return{i:this.id,p:this.position.minimize(),f:this.frame,l:Math.round(this.length)}}}},3421(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(700)),o=i(s(8208)),n=i(s(8509));class a extends r.default{constructor(t,e,s,i){super(t,e,"Laser"),this.direction=s,this.temperature=5,this.damage=()=>8,this.speed=o.default.direction(s).multiply(i),this.momentum=n.default.LASER_MOMENTUM}action(){super.action(),this.momentum-=n.default.LASER_ATTENUATION,this.momentum<0&&this.field.removeShot(this)}}e.default=a},4250(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(700)),o=i(s(8509)),n=i(s(913)),a=i(s(9446)),h=i(s(2956));class d extends r.default{constructor(t,e,s){super(t,e,"Missile"),this.bot=s,this.temperature=10,this.damage=()=>10+2*this.speed.length(),this.fuel=100,this.breakable=!0,this.debugDump={logs:[],arcs:[]},this.direction=e.direction===h.default.DIRECTION_RIGHT?0:180,this.speed=e.speed,this.command=new n.default(this),this.command.reset(),this.controller=new a.default(this)}onThink(){if(this.command.reset(),!(this.fuel<=0))try{this.command.accept(),this.controller.preThink(),this.debugDump={logs:[],arcs:[]},this.owner.scriptLoader&&this.controller.connectConsole(this.owner.scriptLoader.getExposedConsole()),this.bot(this.controller)}catch(t){this.command.reset();const e=t instanceof Error?t.message:String(t);this.debugDump.logs.push({message:`Missile function error: ${e}`,color:"red"})}finally{this.command.unaccept()}}onAction(){this.speed=this.speed.multiply(o.default.SPEED_RESISTANCE),this.command.execute(),this.command.reset()}onHit(t){this.field.removeShot(this),this.field.removeShot(t)}opposite(t){return this.direction+t}log(t){this.debugDump.logs.push({message:t})}scanDebug(t,e,s){this.debugDump.arcs.push({direction:t,angle:e,renge:s})}dump(){const t=super.dump();return this.owner.scriptLoader&&this.owner.scriptLoader.isDebuggable()&&(t.debug=this.debugDump),t}}e.default=d},913(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(3819)),o=i(s(8509)),n=i(s(8208));class a extends r.default{constructor(t){super(),this.missile=t,this.speedUp=0,this.speedDown=0,this.turn=0,this.reset()}reset(){this.speedUp=0,this.speedDown=0,this.turn=0}execute(){if(0<this.missile.fuel){this.missile.direction+=this.turn;const t=n.default.direction(this.missile.direction);this.missile.speed=this.missile.speed.add(t.multiply(this.speedUp)),this.missile.speed=this.missile.speed.multiply(1-this.speedDown),this.missile.fuel-=(this.speedUp+3*this.speedDown)*o.default.FUEL_COST,this.missile.fuel=Math.max(0,this.missile.fuel)}}}e.default=a},9446(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(1336)),o=i(s(6951));class n extends r.default{constructor(t){super(t),this.direction=()=>t.direction;const e=t.command;this.fuel=()=>t.fuel,this.scanEnemy=(s,i,r)=>{e.validate(),t.wait+=1.5;const n=t.opposite(s),a=o.default.createRadar(t.position,n,i,r||Number.MAX_VALUE);return t.field.scanEnemy(t.owner,a)},this.speedUp=()=>{e.validate(),e.speedUp=.8},this.speedDown=()=>{e.validate(),e.speedDown=.1},this.turnRight=()=>{e.validate(),e.turn=-9},this.turnLeft=()=>{e.validate(),e.turn=9},this.log=(...s)=>{e.validate(),t.log(s.map(t=>(t=>"[object String]"===Object.prototype.toString.call(t))(t)?t:JSON.stringify(t)).join(", "))},this.scanDebug=(s,i,r)=>{e.validate(),t.scanDebug(t.opposite(s),i,r)}}connectConsole(t){t&&(t.log=this.log.bind(this))}}e.default=n},700(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(5731)),o=i(s(2170)),n=i(s(8208)),a=i(s(6951));class h extends r.default{constructor(t,e,s){super(t,e.position.x,e.position.y),this.owner=e,this.type=s,this.temperature=0,this.damage=()=>0,this.breakable=!1}action(){this.onAction();const t=this.field.checkCollision(this);t&&(t.onHit(this),this.createFxs()),this.field.checkCollisionEnviroment(this)&&(this.field.removeShot(this),this.createFxs())}createFxs(){for(let t=0;t<3;t++){const t=this.position.add(a.default.rand(16)-8,a.default.rand(16)-8),e=new n.default(a.default.rand(1)-.5,a.default.rand(1)-.5),s=a.default.rand(8)+4;this.field.addFx(new o.default(this.field,t,this.speed.divide(2).add(e),s))}}reaction(t){t.temperature+=this.temperature}onAction(){}dump(){return{o:this.owner.id,i:this.id,p:this.position.minimize(),d:this.direction,s:this.type}}}e.default=h},1335(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(5731)),o=i(s(6582)),n=i(s(6551)),a=i(s(8509)),h=i(s(2956)),d=i(s(6951)),u=i(s(8208)),l=i(s(3421)),c=i(s(4250)),f=i(s(2170));class p extends r.default{constructor(t,e,s,i,r,d,u){super(t,e,s),this.aiSource=i,this.account=r,this.name=d,this.color=u,this.alive=!0,this.temperature=0,this.shield=a.default.INITIAL_SHIELD,this.missileAmmo=a.default.INITIAL_MISSILE_AMMO,this.fuel=a.default.INITIAL_FUEL,this.bot=null,this.debugDump={logs:[],arcs:[]},this.direction=Math.random()<.5?h.default.DIRECTION_RIGHT:h.default.DIRECTION_LEFT,this.command=new o.default(this),this.controller=new n.default(this)}compile(t){if(this.scriptLoader=t,this.bot=t.load(this.aiSource),!this.bot)throw{message:"Function has not been returned."};if("function"!=typeof this.bot)throw{message:"Returned is not a Function."}}onThink(){if(null!==this.bot&&this.alive)try{this.command.accept(),this.controller.preThink(),this.debugDump={logs:[],arcs:[]},this.scriptLoader&&this.controller.connectConsole(this.scriptLoader.getExposedConsole()),this.bot(this.controller)}catch(t){const e=t instanceof Error?t.message:String(t);this.debugDump.logs.push({message:`Sourcer function error: ${e}`,color:"red"}),this.command.reset()}finally{this.command.unaccept()}}action(){if(!this.alive&&d.default.rand(8)<1){const t=this.position.add(d.default.rand(16)-8,d.default.rand(16)-8),e=new u.default(d.default.rand(1)-.5,d.default.rand(1)+.5),s=d.default.rand(8)+4;this.field.addFx(new f.default(this.field,t,e,s))}if(this.speed=this.speed.multiply(a.default.SPEED_RESISTANCE),this.speed=this.speed.subtract(0,a.default.GRAVITY),a.default.TOP_INVISIBLE_HAND<this.position.y){const t=.1*(this.position.y-a.default.TOP_INVISIBLE_HAND);this.speed=this.speed.subtract(0,a.default.GRAVITY*t)}const t=this.field.center-this.position.x;if(a.default.DISTANCE_BORDAR<Math.abs(t)){const e=t<0?-1:1,s=(Math.abs(t)-a.default.DISTANCE_BORDAR)*a.default.DISTANCE_INVISIBLE_HAND*e;this.position=new u.default(this.position.x+s,this.position.y)}this.position.y<0&&(this.shield-=-this.speed.y*a.default.GROUND_DAMAGE_SCALE,this.position=new u.default(this.position.x,0),this.speed=new u.default(this.speed.x,0)),this.temperature-=a.default.COOL_DOWN,this.temperature=Math.max(this.temperature,0);const e=this.temperature-a.default.OVERHEAT_BORDER;if(0<e){const t=e*a.default.OVERHEAT_DAMAGE_LINEAR_WEIGHT,s=Math.pow(e*a.default.OVERHEAT_DAMAGE_POWER_WEIGHT,2);this.shield-=t+s}this.shield=Math.max(0,this.shield),this.command.execute(),this.command.reset()}fire(t){if(t.isLaser()){const e=this.opposite(t.direction),s=new l.default(this.field,this,e,t.power);s.reaction(this),this.field.addShot(s)}if(t.isMissile()&&0<this.missileAmmo){const e=new c.default(this.field,this,t.bot);e.reaction(this),this.missileAmmo--,this.field.addShot(e)}}opposite(t){return this.direction===h.default.DIRECTION_LEFT?d.default.toOpposite(t):t}onHit(t){this.speed=this.speed.add(t.speed.multiply(a.default.ON_HIT_SPEED_GIVEN_RATE)),this.shield-=t.damage(),this.shield=Math.max(0,this.shield),this.field.removeShot(t)}log(t){this.debugDump.logs.push({message:t})}scanDebug(t,e,s){this.debugDump.arcs.push({direction:t,angle:e,renge:s})}dump(){const t={i:this.id,p:this.position.minimize(),d:this.direction,h:Math.ceil(this.shield),t:Math.ceil(this.temperature),a:this.missileAmmo,f:Math.ceil(this.fuel)};return this.scriptLoader&&this.scriptLoader.isDebuggable()&&(t.debug=this.debugDump),t}}e.default=p},6582(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(3819)),o=i(s(8509));class n extends r.default{constructor(t){super(),this.sourcer=t,this.ahead=0,this.ascent=0,this.turn=!1,this.fire=null,this.reset()}reset(){this.ahead=0,this.ascent=0,this.turn=!1,this.fire=null}execute(){this.fire&&this.sourcer.fire(this.fire),this.turn&&(this.sourcer.direction*=-1),0<this.sourcer.fuel&&(this.sourcer.speed=this.sourcer.speed.add(this.ahead*this.sourcer.direction,this.ascent),this.sourcer.fuel-=(Math.abs(this.ahead)+Math.abs(this.ascent))*o.default.FUEL_COST,this.sourcer.fuel=Math.max(0,this.sourcer.fuel))}}e.default=n},6551(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(1336)),o=i(s(8509)),n=i(s(6951)),a=s(7295);class h extends r.default{constructor(t){super(t),this.shield=()=>t.shield,this.temperature=()=>t.temperature,this.missileAmmo=()=>t.missileAmmo,this.fuel=()=>t.fuel;const e=t.field,s=t.command;this.scanEnemy=(i,r,a)=>{s.validate(),t.wait+=o.default.SCAN_WAIT;const h=t.opposite(i),d=a||Number.MAX_VALUE,u=n.default.createRadar(t.position,h,r,d);return e.scanEnemy(t,u)},this.scanAttack=(i,r,a)=>{s.validate(),t.wait+=o.default.SCAN_WAIT;const h=t.opposite(i),d=a||Number.MAX_VALUE,u=n.default.createRadar(t.position,h,r,d);return e.scanAttack(t,u)},this.ahead=()=>{s.validate(),s.ahead=.8},this.back=()=>{s.validate(),s.ahead=-.4},this.ascent=()=>{s.validate(),s.ascent=.9},this.descent=()=>{s.validate(),s.ascent=-.9},this.turn=()=>{s.validate(),s.turn=!0},this.fireLaser=(t,e)=>{s.validate(),s.fire=new a.LaserParam(e,t)},this.fireMissile=t=>{s.validate(),s.fire=new a.MissileParam(t)},this.log=(...e)=>{s.validate(),t.log(e.map(t=>(t=>"[object String]"===Object.prototype.toString.call(t))(t)?t:JSON.stringify(t)).join(", "))},this.scanDebug=(e,i,r)=>{s.validate(),t.scanDebug(t.opposite(e),i,r)}}connectConsole(t){t&&(t.log=this.log.bind(this))}}e.default=h},6951(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(8208)),o=1e-11;class n{static createRadar(t,e,s,i){const r=e=>t.distance(e)<=i;if(360<=s)return r;const o=n.side(t,e+s/2),a=n.side(t,e+180-s/2);return s<180?t=>o(t)&&a(t)&&r(t):t=>(o(t)||a(t))&&r(t)}static side(t,e){const s=n.toRadian(e),i=new r.default(Math.cos(s),Math.sin(s)),a=t.x*i.y-t.y*i.x-o;return t=>0<=t.x*i.y-t.y*i.x-a}static calcDistance(t,e,s){const i=e.subtract(t),r=s.subtract(t);if(i.dot(r)<o)return r.length();const n=t.subtract(e),a=s.subtract(e);return n.dot(a)<o?a.length():Math.abs(i.cross(r)/i.length())}static toRadian(t){return t*(Math.PI/180)}static toOpposite(t){const e=n.normalizeDegree(t);return e<=180?2*(90-e)+e:2*(270-e)+e}static normalizeDegree(t){const e=t%360;return e<0?e+360:e}static rand(t){return Math.random()*t}}e.default=n},8208(t,e){Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e){this.x=t,this.y=e,this.calculatedLength=null,this.calculatedAngle=null}add(t,e){return t instanceof s?new s(this.x+(t.x||0),this.y+(t.y||0)):new s(this.x+(t||0),this.y+(e||0))}subtract(t,e){return t instanceof s?new s(this.x-(t.x||0),this.y-(t.y||0)):new s(this.x-(t||0),this.y-(e||0))}multiply(t){return t instanceof s?new s(this.x*t.x,this.y*t.y):new s(this.x*t,this.y*t)}divide(t){return t instanceof s?new s(this.x/t.x,this.y/t.y):new s(this.x/t,this.y/t)}modulo(t){return t instanceof s?new s(this.x%t.x,this.y%t.y):new s(this.x%t,this.y%t)}negate(){return new s(-this.x,-this.y)}distance(t){return this.subtract(t).length()}length(){return null!==this.calculatedLength||(this.calculatedLength=Math.sqrt(this.dot())),this.calculatedLength}normalize(){const t=this.length(),e=0!==t?1/t:0;return this.multiply(e)}angle(){return 180*this.angleInRadians()/Math.PI}angleInRadians(){return null!==this.calculatedAngle||(this.calculatedAngle=Math.atan2(-this.y,this.x)),this.calculatedAngle}dot(t=this){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}rotate(t){const e=t*(Math.PI/180),i=Math.cos(e),r=Math.sin(e);return new s(i*this.x-r*this.y,i*this.y+r*this.x)}static direction(t){return new s(1,0).rotate(t)}minimize(){return{x:Math.round(this.x),y:Math.round(this.y)}}}e.default=s}},e={};!function s(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,s),o.exports}(443)})();